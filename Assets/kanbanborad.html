<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="estilos.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tablero Kanban</title>
</head>
<body>
    
    <script src="drag.js" defer></script>
    <script src="todo.js" defer></script>


    <div class="board">
        <form id="todo-form">
            <input type="text" placeholder="Ingresa tu nombre" id="name-input" />       
            <input type="text" placeholder="Nuevo TODO..." id="todo-input">
            <button type="submit" id="send-button">Agregar</button>
        </form>
        <div class="lanes">
            <div class="swim-lane" id="todo-lane" data-valor="1">
                <h2 class="heading">TO DO</h2>
            </div>
            <div class="swim-lane" data-valor="2">
                <h2 class="heading">DOING</h2>
            </div>
            <div class="swim-lane" data-valor="3">
                <h2 class="heading">DONE</h2>            
            </div>
        </div>
    </div>
   
    <script>

        let name = document.getElementById("name-input");
        let todo = document.getElementById("todo-input");
        let todolist = document.getElementById("todo-lane");

        let enviar = document.getElementById("send-button").addEventListener("click", async function (e)
        {
            if (document.forms[0].checkValidity()) {
                let todo = { Nombre: name.value, Tarea: todo.value, valor: todolist.data-valor };

                try {

                    let response = await fetch("/tablero/tarea", {
                        method: "POST",
                        body: JSON.stringify(todo),
                        headers: {
                            "content-type": "application/json"
                        }
                    });

                }
                catch (ex) {
                    console.log(ex);
                }


            } else {
                document.forms[0].reportValidity();
            }

        });



    </script>

</body>
</html>